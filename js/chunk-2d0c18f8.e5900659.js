(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c18f8"],{4721:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("CRow",[s("CCol",{attrs:{sm:"12",md:"12"}},[s("CCard",[s("CCardHeader",[s("h3",[e._v("Création d'un capteur")])]),s("CCardBody",[s("form",{attrs:{method:"post"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"sensorName"}},[e._v("Nom Capteur")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.nameSensor,expression:"nameSensor"}],staticClass:"form-control",attrs:{type:"text",id:"sensorName",placeholder:"Entrer nom..."},domProps:{value:e.nameSensor},on:{input:function(t){t.target.composing||(e.nameSensor=t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"sensorZone"}},[e._v("Nom de la zone")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.nameZone,expression:"nameZone"}],staticClass:"form-control",attrs:{type:"text",id:"sensorZone",placeholder:"Entrer nom de la zone..."},domProps:{value:e.nameZone},on:{input:function(t){t.target.composing||(e.nameZone=t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"sensorDescription"}},[e._v("Description du capteur")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sensorDesc,expression:"sensorDesc"}],staticClass:"form-control",attrs:{id:"sensorDescription",rows:"3"},domProps:{value:e.sensorDesc},on:{input:function(t){t.target.composing||(e.sensorDesc=t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"typeScene"}},[e._v("Type de la scène")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.typeSc,expression:"typeSc"}],staticClass:"form-control",attrs:{id:"typeScene",placeholder:"Choisir type..."},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.typeSc=t.target.multiple?s:s[0]}}},e._l(e.types,(function(t){return s("option",{domProps:{value:{id:t.id,text:t.name}}},[e._v(e._s(t.name)+" ")])})),0)]),s("Button",{staticClass:"btn btn-primary  btn-block",attrs:{type:"submit"}},[e._v("Créer capteur")])],1)]),s("CCardFooter")],1),s("Modal",{attrs:{id:"exampleModal"},on:{close:function(t){e.boolModal1=!1}}},[s("h2",{attrs:{slot:"title"},slot:"title"},[e._v("Modification Capteur")]),s("EditForm",{attrs:{slot:"body_content",editFormData:e.editFormData},on:{"edit-done":e.postEditedData,"cancel-edit":e.close_edit},slot:"body_content"})],1),s("Modal",{attrs:{id:"deleteModal"}},[s("h1",{attrs:{slot:"title"},slot:"title"},[e._v("Confirmer la suppression")]),s("p",{attrs:{slot:"body_content"},slot:"body_content"},[e._v("Êtes vous sur de vouloir supprimer ?")]),s("button",{staticClass:"btn btn-danger",attrs:{slot:"button1",type:"button"},on:{click:e.deleteSensor},slot:"button1"},[e._v("Supprimer")]),s("button",{staticClass:"btn btn-secondary",attrs:{slot:"button2",type:"button","data-dismiss":"modal"},slot:"button2"},[e._v("Annuler")])]),s("Modal",{attrs:{id:"createModal"}},[s("div",{staticClass:"alert alert-success",attrs:{slot:"body_content",role:"alert"},slot:"body_content"},[s("h2",[e._v(" Capteur créer avec succès !")])]),s("button",{staticClass:"btn btn-secondary",attrs:{slot:"button2",type:"button","data-dismiss":"modal"},slot:"button2"},[e._v("Fermer")])])],1)],1),s("CRow",{attrs:{id:"sensorTable"}},[s("CCol",{attrs:{sm:"12",md:"12"}},[s("CCard",[s("CCardBody",[s("TableAffichage",{attrs:{allDBsensors:e.allDBsensors},on:{"delete-action":e.deleteSensorModal,"edit-action":e.editSensorModal}})],1)],1)],1)],1)],1)},n=[],a=s("b98d"),r=s("714b"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("table",{staticClass:"table table-hover table-bordered table-striped"},[e._m(0),s("tbody",e._l(e.allDBsensors,(function(t){return s("tr",[s("th",{attrs:{scope:"row",id:t.sensor_name}},[e._v(e._s(t.id))]),s("td",[e._v(e._s(t.sensor_name))]),s("td",[e._v(e._s(t.sensor_zone))]),s("td",[e._v(e._s(t.sensor_desc))]),s("td",[e._v(e._s(t.sensor_type_name))])])})),0)])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[e._v("ID")]),s("th",{attrs:{scope:"col"}},[e._v("Nom Capteur")]),s("th",{attrs:{scope:"col"}},[e._v("Nom Zone")]),s("th",{attrs:{scope:"col"}},[e._v("Description")]),s("th",{attrs:{scope:"col"}},[e._v("Type")])])])}],d={name:"TableAffichage",props:{allDBsensors:{type:Array,required:!0}}},c=d,u=s("2877"),m=Object(u["a"])(c,l,i,!1,null,null,null),p=m.exports,_=s("5c8e"),v=s("750b"),h=(s("1157"),s("6e97")),b={name:"CreateSensor",components:{Modal:r["a"],TableAffichage:p,ActionButton:v["a"],EditForm:_["a"]},data:function(){return{boolModal1:!1,valr:null,nameSensor:null,nameZone:null,sensorDesc:null,typeSc:"",types:[{id:1,name:"Scène large échelle"},{id:2,name:"Scène à moyenne échelle"}],allDBsensors:[],editFormData:{},deletedSensor:{}}},methods:{onSubmit:function(){var e=this,t={sensor_name:this.nameSensor,sensor_zone:this.nameZone,sensor_desc:this.sensorDesc,sensor_type_name:this.typeSc.text,sensor_type_id:this.typeSc.id};a["a"].postSensorData(t).then((function(){var t=new h["a"](document.getElementById("createModal"));t.show(),e.getMySensors()})),a["a"].registerSensor(t,this.nameSensor,this.typeSc.text),this.nameSensor=null,this.nameZone=null,this.sensorDesc=null,this.typeSc=""},editSensorModal:function(e){var t=new h["a"](document.getElementById("exampleModal"));this.editFormData=Object.assign({},e),t.show()},deleteSensorModal:function(e){var t=new h["a"](document.getElementById("deleteModal"));this.deletedSensor=Object.assign({},e),t.show()},deleteSensor:function(){var e=this;a["a"].deleteSensorRequest(this.deletedSensor.id).then((function(){e.getMySensors();var t=document.getElementById("deleteModal"),s=h["a"].getInstance(t);s.hide()}))},postEditedData:function(e){var t=this,s={sensor_name:e.sensor_name,sensor_zone:e.sensor_zone,sensor_desc:e.sensor_desc,sensor_type_name:e.sensor_type_name,sensor_type_id:e.sensor_type_id};a["a"].postEditData(e.id,s).then((function(){t.getMySensors();var e=document.getElementById("exampleModal"),s=h["a"].getInstance(e);s.hide()}))},getMySensors:function(){var e=this;a["a"].getSensors().then((function(t){e.allDBsensors=t.data})).catch((function(e){console.log(e)}))},close_edit:function(){new h["a"](document.getElementById("exampleModal"));console.log("wsalt"),console.log("wsalt2")}},created:function(){this.getMySensors()},computed:{test:function(){return this.typeSc.text+" "+this.nameSensor+" "+this.nameZone}}},f=b,y=Object(u["a"])(f,o,n,!1,null,null,null);t["default"]=y.exports}}]);
//# sourceMappingURL=chunk-2d0c18f8.e5900659.js.map